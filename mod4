#include <iostream>
#include <cstring>
#include <cstdio>
using namespace std;

void mod4(int a[],int n){
    int p0=0;
    int p1=0;
    int p2=n;
    int p3=n;
    int i=0;
    while(i<p2){
        if(a[i]%4==0){
            if(p0==p1){
                a[p0++]=a[i];
                p1++;
            }else{
                swap(a[p0++],a[i]);
                p1++;
            }
            i++;
        }else if(a[i]%4==1){
            p1++;
            i++;
        }else if(a[i]%4==2){
            swap(a[--p2],a[i]);
        }else{
            if(p2==p3){
                swap(a[--p3],a[i]);
                p2--;
            }else{
                swap(a[i],a[--p2]);
                swap(a[p2],a[--p3]);
            }
        }
    }
}
int main()
{
    int a[]={1,2,3,4,5,6,7,8};
    mod4(a,8);
    for(int i=0;i<8;i++)
        cout<<a[i]<<" ";
   return 0;
}
